# CF2007B Index and Maximum Value

**************
## 题目描述

Index 在生日派对上收到了另一个整数数组 $a_1,a_2,\dots,a_n$。随后，她准备对这个数组进行一些操作。

形式化地，她决定对这个数组执行 $m$ 次操作。有两种操作类型：
- 第一种操作形如 $\texttt{+ l r}$。给定两个正整数 $l,r$，将所有满足 $1\le i\le n,l\le a_i\le r$ 的 $a_i$ 的值改为 $a_i+1$。
- 第二种操作形如 $\texttt{- l r}$。给定两个正整数 $l,r$，将所有满足 $1\le i\le n,l\le a_i\le r$ 的 $a_i$ 的值改为 $a_i-1$。

举个例子，如果给定的数组 $a$ 初始为 $[7,1,3,4,3]$，在执行操作 $\texttt{+ 2 4}$ 后，数组变为 $a=[7,1,4,5,4]$。然后，在执行操作 $\texttt{- 1 10}$ 后，数组变为 $a=[6,0,3,4,3]$。

Index 对 $a$ 数组的最大值很好奇。在每次操作之后，请告诉她 $a$ 数组中的最大值。

**************
## 输入格式

**每个测试点有多组数据。**

第一行有一个正整数 $t$，表示数据的组数。

每组数据的第一行有两个整数 $n$ 和 $m(1\le n\le10^5,1\le m\le10^5)$，分别代表数组的长度和操作的次数。

每组数据的第二行有 $n$ 个整数 $a_1,a_2,\dots,a_n$，表示数组 $a$ 的初始值。

接下来 $m$ 行，每行描述一个操作，格式如下：
$\texttt{c l r}$ （$c\in\{\texttt{+,-}\}$，$l$ 和 $r$ 是整数，满足 $1\le l\le r\le10^9$）。

注意在若干次操作后，$a$ 数组中的某些元素可能不满足 $1\le a_i\le10^9$，就像样例中给出的那样。

保证 $\sum n\le10^5,\sum m\le 10^5$。

**************
## 输出格式

对于每组数据，输出一行 $m$ 个整数，第 $i$ 个整数为第 $i$ 次操作后 $a$ 数组中的最大值。

**************
## 思路
如果真的按照题意思路写模拟代码，时间复杂度为O(n*m);
那就换思维：
> 假设当前最大值是 mx

> 如果 mx在区间内，它必然会被操作影响。
所有等于 mx的值都一起加/减；
所以新最大值就是 mx+1或 mx−1

> 如果 mx不在区间内：
当前最大元素完全没动；
而所有其他元素最多变化±1；
不可能超过它；所以最大值不变。

> 因此我们只需维护一个变量 mx

所以我们只需要一开始找到最大值mx，跟踪mx的变化即可

*************
## AC代码
```cpp
#include <bits/stdc++.h>
using namespace std;
using ll = long long;

signed main()
{
    ios::sync_with_stdio(false);
    cin.tie(0);

    int t;
    cin >> t;
    while (t--)
    {
        int n, m;
        cin >> n >> m;
        vector<ll> a(n);
        for (int i = 0; i < n; i++)
        {
            cin >> a[i];
        }

        ll mx = *max_element(a.begin(), a.end());

        while (m--)
        {
            char op;
            ll l, r;
            cin >> op >> l >> r;
            if (mx >= l && mx <= r)
            {
                if (op == '+')
                    mx++;
                else
                    mx--;
            }
            cout << mx << ' ';
        }
        cout << '\n';
    }
}
```